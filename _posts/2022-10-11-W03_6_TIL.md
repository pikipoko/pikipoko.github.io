---
title: "W03_6_TIL"
date: 11/10/2022
categories: SWJG TIL
---

## 컴퓨터 시스템 1.5 캐시가 중요하다

- 시스템은 정보를 한 곳에서 다른 곳으로 이동시키는 일에 많은 시간을 보낸다.

- hello 프로그램의 기계어 인스트럭션들은 본래 하드디스크에 저장되어 있다.
- 1-- 프로그램이 로딩 될 때 이 인스트럭션들은 메인 메모리로 복사 된다.
- 2-- 프로세서가 프로그램을 실행할 때 인스트럭션들은 메인 메모리에서 프로세서로 복사된다.
- 3--'Hello, world\n' 데이터 스트링도 본래는 디스크에 저장되어 있었지만, 메인 메모리로 복사되었다가 디스플레이 장치로 복사 된다.

> 프로그래머의 관점에서 보면, 이러한 여러 복사 과정들(1,2,3)이 프로그램의 "실제 작업"을 느리게 하는 오버헤드이다.  
>> 시스템 설계자들의 주요 목적은 이러한 복사과정들을 가능한 빠르게 동작하도록 하는 것이다.

- 물리학의 법칙 때문에 더 큰 저장장치들은 보다 작은 저장장치들보다 느린 속도를 갖는다.
- 더 빠른 장치들은 더 느린 장치들보다 만드는데 더 많은 비용이 든다.
  - 디스크 드라이브는 메인 메모리보다 1000배 크지만, 데이터를 읽어들이는데 메인 메모리보다 천만 배 더 오래 걸릴 수 있다.

- 마찬가지로 레지스터 파일은 수백 바이트의 정보를 저장하는 반면, 메인 메모리의 경우 십억 개의 바이트를 저장한다.
  - 레지스터 속도 = 약 메인 메모리 속도 x 100
    - 속도 = 바이트 / 데이터를 읽어들이는 데 걸리는 시간

- 반도체 기술이 발달함에 따라 프로세서-메모리 간 속도 격차가 증가하고 있다.
- 시스템 설계자는 이 격차에 대응하기 위해 캐시 메모리(=캐시)를 고안

> 메인 메모리를 더 빠르게 동작하도록 만드는 것보다 프로세서를 더 빨리 동작하도록 만드는 것이 더 쉽고 비용이 적게 듬.

### 캐시

- 프로세서가 단기간에 필요로 할 가능성이 높은 정보를 임시로 저장할 목적으로 사용
- L1, L2 캐시는 SRAM(Static Random Access Memory)라는 하드웨어 기술로 구현됨.
- L3 -> 프로그램이 지엽적인 영역의 코드와 데이터를 액세스하는 경향인 지역성(locality)을 활용하여 시스템이 매우 크고 빠른 메모리 효과를 얻을 수 있다는 것에서 시작.
- 자주 액세스할 가능성이 높은 데이터를 캐시가 보관하도록 설정하면, 빠른 캐시를 이용해서 대부분의 메모리 작업 수행 가능

> 캐시를 이해하는 응용 프로그래머는 캐시를 이용해 프로그램 성능을 10배 이상 개선 가능.

---

- L1 캐시
  - 약 수천 바이트 데이터 저장
  - 레지스터 파일만큼 빠른 속도

- L2 캐시
  - 수백 킬로 바이트 ~ 수 메가 바이트
  - 프로세서와 전용 버스를 통해 연결됨

- L1 캐시의 속도 = L2 캐시의 속도 x 5
- L2 캐시의 속도 = 메인 메모리의 속도 x 5 ~ 10

---
